{% extends 'layout.html' %}
{% block content %}

<form action="{{ url_for('post_signup') }}" method="POST" class="mx-1 mx-md-4" enctype="multipart/form-data">
	
  <div class="d-flex flex-row align-items-center mb-4">
  <i class="fas fa-user fa-lg me-3 fa-fw"></i>
  <div class="form-outline flex-fill mb-0">
    <input type="text" name="name" id="form3Example1c" class="form-control" minlength="2" maxlength="32" placeholder="Mario" required/>
    <label class="form-label" for="form3Example1c">Nome</label>
  </div>
  </div>

  <div class="d-flex flex-row align-items-center mb-4">
  <i class="fas fa-user fa-lg me-3 fa-fw"></i>
  <div class="form-outline flex-fill mb-0">
    <input type="text" name="surname" id="form3Example1c" class="form-control" minlength="2" maxlength="32" placeholder="Rossi" required/>
    <label class="form-label" for="form3Example1c">Cognome</label>
  </div>
  </div>

  <div class="d-flex flex-row align-items-center mb-4">
  <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
  <div class="form-outline flex-fill mb-0">
    <input type="email" name="email" id="form3Example3c" class="form-control" minlength="5" placeholder="mario.rossi@darara.it" required/>
    <label class="form-label" for="form3Example3c">Email</label>
  </div>
  </div>

  <div class="d-flex flex-row align-items-center mb-4">
  <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
  <div class="form-outline flex-fill mb-0">
    <input type="password" name="password" id="form3Example4c" class="form-control" required/>
    <i class="fas fa-info-circle" id="password-info-icon"></i>
    <label class="form-label" for="form3Example4c">Password</label>
    <p class="form-tooltip" id="password-tooltip">
      La password deve essere lunga almeno 8 caratteri e deve contenre una lettera maiuscola e minuscola
    </p>
  </div>
  </div>

  <div class="d-flex flex-row align-items-center mb-4">
    <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
    <div class="form-outline flex-fill mb-0">
      <input type="file" name="propic" id="form3Example4c" class="form-control" required/>
      <label class="form-label" for="form3Example4c">Immagine del profilo</label>
    </div>
  </div>

  <div class="form-check d-flex justify-content-center mb-5">
  <input class="form-check-input me-2" name="terms" type="checkbox" value="true" id="form2Example3c" required/>
  <label class="form-check-label"  for="form2Example3">
    Approvo i <a class="stock-a" href="#!">Termini di servizio</a> e le <a class="stock-a" href="#!">potiche sulla privacy</a> di DaraDara
  </label>
  </div>

  <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
  <button type="submit" class="btn btn-primary btn-lg">Registrati</button>
  </div>

</form>

<script>

    // check password strength
    const passwordInput = document.querySelector("input[name='password']");
    const passwordInfoIcon = document.querySelector("#password-info-icon");
    const passwordTooltip = document.querySelector("#password-tooltip");
    
    passwordInput.addEventListener("input", checkPassword);
    
    function checkPassword() {
      let password = passwordInput.value;
      let strength = 0;
      let strengthText = "";
    
      if (password.length >= 8) {
        strength++;
      }
      if (password.match(/[a-z]/)) {
        strength++;
      }
      if (password.match(/[A-Z]/)) {
        strength++;
      }
      if (password.match(/[0-9]/)) {
        strength++;
      }
      if (password.match(/[!@#\$%\^&\*]/)) {
        strength++;
      }
    
      switch (strength) {
        case 0:
          strengthText = "Password debole";
          break;
        case 1:
          strengthText = "Password media";
          break;
        case 2:
          strengthText = "Password media";
          break;
        case 3:
          strengthText = "Password forte";
          break;
        case 4:
          strengthText = "Password molto forte";
          break;
        case 5:
          strengthText = "Password molto forte";
          break;
      }
    
      passwordTooltip.innerText = strengthText;
    
      if (strength >= 3) {
        passwordInfoIcon.classList.remove("fa-times-circle");
        passwordInfoIcon.classList.add("fa-check-circle");
      } else {
        passwordInfoIcon.classList.remove("fa-check-circle");
        passwordInfoIcon.classList.add("fa-times-circle");
      }
    }  

</script>

{% endblock %}